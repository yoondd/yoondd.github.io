프로그램이 데이터를 버퍼에 저장할 때, 버퍼가 가득 차서 넘치게 되어 개발자가 지정한 부분의 바깥쪽에 덮어 씌워져버리는 취약점, 버그, 이를 이용한 공격 방법을 말한다.

넘쳐난 데이터는 원래 데이터를 밀어내거나 이상한 곳에 저장이 되는 것이 아니라 덮어 씌우는게 핵심이다. 여기서 덮어씌워진 메모리에는 다른 데이터가 이미 포함되어 있을 수도 있고, 이 때문에 메모리 접근 오류, 프로그램 종료, 시스템 보안 취약점 등이 발생할 수 있다.

버퍼 오버플로우는 보통 데이터를 저장하는 과정에서 그 데이터를 저장할 메모리 위치가 유효한지를 검사하지 않아 발생한다. 이러한 경우 데이터가 담긴 위치 근처에 있는 값이 손상되고, 그 손상이 프로그램 실행에 영향을 미칠 수도 있다. 특히 악의적인 공격으로 인해 프로그램에 취약점이 발생할 수 있다.

흔하게 버퍼오버플로우와 관련되는 프로그래밍 언어는 C와 C++로, 어떤 영역의 메모리에서도 내장된 데이터 접근 또는 덮어쓰기 보호 기능을 제공하지 않으며 어떤 배열에 기록되는 데이터가 그 배열의 범위 안에 포함되는지 자동으로 검사하지 않는다. 

## 발생 원인

프로그램은 수많은 함수로 구성되어있는데, 프포그램을 실행하여 함수가 호출될 때, 지역변수와 복귀주소(Return Address)가 스택이라고 하는 논리 데이터 구조에 저장이 된다. 복귀주소가 저장이 되는 이유는 함수가 종료될 때 OS가 함수를 호출한 프로그램에게 제어권을 넘겨야하는데, 이 복귀주소가 없으면 함수가 종료된 후에 어떤 명령어를 수행해야할지 알 수 없기 때문이다. 버퍼 오버플로우는 이 복귀주소가 함수가 사용하는 지역변수의 데이터에 의해 침범당할 때 발생하게 된다. 개발자 실수로인해 지역변수가 할당된 크기보다 더 큰 크기로 입력되면, 입력 데이터에 의해 복귀주소가 변경되어버린다. 즉, 함수가 종료될 때 전혀 관계없는 복귀주소를 실행시키게 되어 실행 프로그램이 비정상적으로 종료되게 된다는 말이다. 악의적인 공격자가 이러한 취약점을 알고서 데이터의 길이와 내용을 적절히 조정하여 버퍼 오버플로우를 일으켜서 특정 코드를 실행시키게 하는 해킹 공격 기법을 버퍼 오버플로우 공격이라고 한다.


## 예제 소스코드 보기

```c
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
  char buffer[16];
  if(argc < 2)
    return -1;
  strcpy(buffer, argv[1]);
}
```
]
위 코드는 실행시 인수로 받은 문자열을 버퍼에 옮기고 버퍼를 출력하는 간단한  c언어 코드다. 
