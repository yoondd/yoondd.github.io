## 리액트에서 화면 렌더링은 비동기인가 동기인가?

리액트(React)에서 화면 렌더링이 동기(synchronous)인지 비동기(asynchronous)인지는 리액트의 상태(state) 업데이트와 렌더링 처리 방식, 그리고 실제 DOM 반영 시점에 따라 구분할 수 있다.

**1. 상태 업데이트(setState/useState)는 비동기적으로 처리된다**
- 리액트에서 `useState`의 setter 함수(setState)는 비동기적으로 동작합니다. 여러 번의 상태 변경 요청이 연속적으로 발생해도, 리액트는 이 요청들을 "배치(batch)" 처리하여 한 번에 렌더링합니다. 이는 성능 최적화와 일관성 유지를 위해서입니다
- 예를 들어, 버튼 클릭 등으로 setState를 여러 번 호출해도, 각 호출이 즉시 렌더링을 발생시키지 않고, 일정 시간(React 18 이후에는 더 정교한 Automatic Batching) 동안 모아서 한 번만 렌더링합니다

**2. 렌더링 과정 자체는 동기적으로 실행된다**
- 리액트의 렌더링 함수(컴포넌트 함수)는 상태나 props가 변경되면 "즉시" 실행되어 새로운 Virtual DOM을 생성합니다. 이 과정은 자바스크립트 실행 흐름 내에서 동기적으로 일어납니다.
- 즉, 상태가 변경되면 리액트는 곧바로 새로운 Virtual DOM을 만들고, 이전 Virtual DOM과 비교(diff)하여 변경 사항을 찾는 작업을 동기적으로 수행합니다

**3. 실제 DOM 반영(커밋)은 브라우저 렌더링 사이클에 따라 비동기적으로 처리될 수 있다**
- Virtual DOM의 변경 사항이 실제 DOM에 반영되는 "커밋(commit)" 단계는 브라우저의 렌더링 사이클과 맞물려 비동기적으로 처리될 수 있습니다. 이 과정에서 브라우저가 레이아웃 계산, 리플로우, 리페인트 등을 수행합니다
- 따라서, 리액트의 상태 업데이트 → Virtual DOM 생성/비교 → 실제 DOM 반영까지의 전체 흐름에서, 중간 단계(특히 실제 화면 반영)는 비동기적인 특성을 가집니다.

## 정리

|구분|동기/비동기|설명|
|---|---|---|
|상태 업데이트(setState)|비동기|여러 상태 변경을 배치 처리하여 한 번에 렌더링, 즉시 반영되지 않음|
|컴포넌트 렌더 함수 실행|동기|상태/props 변경 시 즉시 Virtual DOM 생성, 동기적으로 실행|
|실제 DOM 반영(커밋)|비동기|브라우저 렌더링 사이클에 따라 실제 DOM에 반영, 비동기적 특성|

## 결론

- **리액트에서 화면 렌더링은 "상태 업데이트와 실제 DOM 반영" 측면에서는 비동기적으로 처리되며, "렌더 함수 실행(Virtual DOM 생성)"은 동기적으로 실행됩니다.**
- 실무에서는 setState나 useState의 setter 호출 직후에 상태가 바로 반영되지 않는 점, 그리고 여러 상태 변경이 한 번에 처리되는 점에서 "리액트의 렌더링은 비동기적이다"라고 이해하는 것이 일반적입니다

> "React의 상태는 동기적으로 실행되지만, 결과는 비동기처럼 반영되며, 이 모든 구조는 배칭과 렌링 스케줄링 덕분이다.


따라서, 리액트의 화면 렌더링은 **비동기적 특성을 가진다**고 말할 수 있습니다.